<link rel="stylesheet" href="/style/css/challenge.css">

<main class="challenge-wrapper">

  <!-- Intro Section -->
  <section class="challenge-intro">
    <h1 class="challenge-title">52 Games In {{year}}</h1>

    <!-- Year Links -->
    <div class="challenge-year-links">
      <a href="/yearly-challenge-2020" class="{{#if (eq activeYear 2020)}}active{{/if}}">2020</a>
      <a href="/yearly-challenge-2021" class="{{#if (eq activeYear 2021)}}active{{/if}}">2021</a>
      <a href="/yearly-challenge-2022" class="{{#if (eq activeYear 2022)}}active{{/if}}">2022</a>
      <a href="/yearly-challenge-2023" class="{{#if (eq activeYear 2023)}}active{{/if}}">2023</a>
      <a href="/yearly-challenge-2024" class="{{#if (eq activeYear 2024)}}active{{/if}}">2024</a>
      <a href="/yearly-challenge-2025" class="{{#if (eq activeYear 2025)}}active{{/if}}">2025</a>
    </div>

    <!-- Rules Modal Button -->
    <button class="challenge-modal-btn" onclick="openModal()">The Challenge</button>

    <!-- Modal -->
    <div id="challenge-modal" class="challenge-modal">
      <div class="challenge-modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h3>52 Games Challenge</h3>
        <p>The challenge is quite simple â€“ try to beat 52 games (or more) in {{year}}.</p>
        <ol>
          <li>In general, nothing can be looked up or referenced online (exceptions for understanding rogue-lite mechanics).</li>
          <li>To complete a game means to see its ending credits. If none exist, best judgment must prevail.</li>
          <li>Beating previously beaten games is allowed. Games started the previous year are valid.</li>
          <li>Difficulty is flexible. Higher difficulties are encouraged, while the lowest may violate the spirit of the challenge.</li>
        </ol>
      </div>
    </div>
  </section>

  <!-- Game List -->
  <section class="challenge-list">
    {{#each result}}
      <article class="challenge-entry">
        <h2 class="challenge-entry-title">{{id}}. {{name}}</h2>

        <div class="challenge-entry-image">
          <img src="{{image}}" alt="{{name}} Cover">
        </div>

        <p class="challenge-entry-description">{{description}}</p>

        <div class="challenge-entry-meta">
          <span>
            <i data-lucide="gamepad-2"></i>
            <span class="label">Platform:</span> {{platform}}
          </span>
          <span>
            <i data-lucide="swords"></i>
            <span class="label">Difficulty:</span> {{difficulty}}
          </span>
          <span>
            <i data-lucide="star"></i>
            <span class="label">Rating:</span> {{rating}}/10
          </span>
        </div>
      </article>
    {{/each}}
  </section>

</main>

<!-- Lucide + modal script -->
<script src="https://unpkg.com/lucide@latest"></script>
<script>
  function openModal() {
    document.getElementById('challenge-modal').style.display = 'flex';
  }

  function closeModal() {
    document.getElementById('challenge-modal').style.display = 'none';
  }

  window.onclick = function(event) {
    const modal = document.getElementById('challenge-modal');
    if (event.target === modal) {
      closeModal();
    }
  };

  document.addEventListener('DOMContentLoaded', function () {
    if (window.lucide) {
      window.lucide.createIcons();
    }
  });
</script>
